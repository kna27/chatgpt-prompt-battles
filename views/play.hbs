<!DOCTYPE html>
<html lang="en">

<head>
    {{> head_meta}}
    <title>Play Page</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <h1>{{name}}</h1>
    <h2>By {{author}}</h2>
    <p> {{solves}} solves</p>
    <p>{{prompt}}</p>
    <form>
        <label for="promptInput">Enter Prompt:</label>
        <input type="text" id="promptInput" name="promptInput" required>
        <button type="submit">Inject Prompt</button>
    </form>
    <h2>Result:</h2>
    <div id="result"></div>
    <a href="/challs">Back to Challenges</a>
</body>

<script>
    $(document).ready(function () {
        // Event listener for the form submission
        $('form').submit(function (event) {
            event.preventDefault();

            // Get the prompt entered by the user
            const prompt = $('#promptInput').val();

            // Send the prompt to the server
            $.ajax({
                type: 'POST',
                url: '/play/{{id}}',
                data: JSON.stringify({ injection: prompt }),
                contentType: 'application/json',
                success: function (response) {
                    // Display the completed prompt
                    $('#result').text(response);
                },
                error: function (error) {
                    console.error('Error:', error.responseText);
                }
            });
        });
    });
</script>

</html>